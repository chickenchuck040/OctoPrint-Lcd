#: kivy 1.9.0

#:import Server octoprint.server

#<Label>:
    #font_name: '/home/tim/python/kivy/OctoPrint-Lcd/octoprint_lcd/ui/fonts/Ubuntu-M.ttf'
    #font_name: 'fonts/Ubuntu-M.ttf'

<TimeLabel@BoxLayout>:
    time: "00:00:00"
    title: "No Time"

    spacing: 2
    orientation: 'vertical'


    Label:
        text: root.title
        font_size: 24
        size_hint: 1, None
        text_size: self.width, None
        size: self.texture_size[0], self.texture_size[1]
        halign: 'center'

    Label:
        text: root.time
        font_size: 36
        size_hint: 1, None
        text_size: self.width, None
        size: self.texture_size[0], self.texture_size[1]
        halign: 'center'
        #padding: 5, 10

<TemperatureLabel@BoxLayout>:
    actual: "-"
    target: "-"
    title: ""

    spacing: 2
    padding: 5

    Label:
        text: root.title
        font_size: 24
        size_hint: 0.3, None
        text_size: self.width, None
        size: self.texture_size[0], self.texture_size[1]
        halign: 'right'

    Label:
        text: root.actual + " " + unichr(176) + "C"
        font_size: 24
        size_hint: 0.3, None
        text_size: self.width, None
        size: self.texture_size[0], self.texture_size[1]
        halign: 'right'

    Label:
        text: root.target + " " + unichr(176) + "C"
        font_size: 24
        size_hint: 0.3, None
        text_size: self.width, None
        size: self.texture_size[0], self.texture_size[1]
        halign: 'right'
    Label:
        size_hint: 0.1, 1

<FilamentLabel@BoxLayout>:
    length: " - - "
    volume: " - - "
    title: ""

    spacing: 2
    padding: 5
    #orientation: 'vertical'

    Label:
        text: root.title
        font_size: 24
        size_hint: 0.4, None
        text_size: self.width, None
        size: self.texture_size[0], self.texture_size[1]
        halign: 'right'

    Label:
        text: root.length + "m"
        font_size: 24
        size_hint: 0.25, None
        text_size: self.width, None
        size: self.texture_size[0], self.texture_size[1]
        halign: 'right'
    Label:
        text: root.volume + "cm" + unichr(179)
        font_size: 24
        size_hint: 0.35, None
        text_size: self.width, None
        size: self.texture_size[0], self.texture_size[1]
        halign: 'right'
    Label:
        size_hint: 0, 1

<StatusTab>:
    BoxLayout:
        orientation: 'vertical'
        Label:
            id: status_label
            text: 'Printing'
            halign: 'center'
            font_size: 48
            text_size: root.width, 60
            size: self.texture_size
            size_hint: 1, None
        Label:
            id: file_label
            text: 'Everything.gcode'
            halign: 'center'
            font_size: 24
            text_size: root.width, 40
            size: self.texture_size
            size_hint: 1, None
        BoxLayout:
            #size: self.width, self.height
            #size_hint: 1, None
            padding: 10
            BoxLayout:
                orientation: 'vertical'
                TemperatureLabel:
                    id: bed_status
                    title: "Bed:"
                TemperatureLabel:
                    id: tool0_status
                    title: "Tool 0:"
                TemperatureLabel:
                    id: tool1_status
                    title: "Tool 1:"
                TemperatureLabel:
                    id: tool2_status
                    title: "Tool 2:"

            BoxLayout:
                orientation: 'vertical'
                #size_hint: 0.6, 1
                FilamentLabel:
                    id: tool0_filament
                    title: "Tool 0 Usage: "
                FilamentLabel:
                    id: tool1_filament
                    title: "Tool 1 Usage: "
                FilamentLabel:
                    id: tool2_filament
                    title: "Tool 2 Usage: "

        BoxLayout:
            #orientation: 'vertical'
            size: self.width, 70
            size_hint: 1, None
            TimeLabel:
                id: time_in
                time: "12:34:54"
                title: 'Printed'
            TimeLabel:
                id: time_remaining
                time: "10:47:32"
                title: 'Remaining'
            TimeLabel:
                id: time_total
                time: "22:21:12"
                title: 'Total'
        ProgressBar:
            id: progress
            max: 100
            value: 56
            padding: 5
            size: self.width, 30
            size_hint: 1, None
        BoxLayout:
            size_hint: 1, None
            size: self.width, 40
            size_hint: 1, None
            size: self.width, 40
            Button:
                text: "Print"
                id: print_button
                on_press: Server.printer.start_print()
            Button:
                text: "Pause"
                id: pause_button
                on_press: Server.printer.toggle_pause_print()
            Button:
                text: "Cancel"
                id: cancel_button
                on_press: Server.printer.cancel_print()
                background_color: 2, .5, .5, 1

<FilesTab>:
    BoxLayout:
        Label:
            text: "Info"
    BoxLayout:
        ScrollView:
            size: self.size
            GridLayout:
                id: file_list
                size_hint_y: None
                cols: 1
                #row_default_height: '20dp'
                #row_force_default: True
                spacing: 0, 0
                padding: 0, 0

                Label:
                    text: "Lorem ipsum dolor sit amet"

<OctoprintLcd>:
    pos_hint: {'center_x': .5, 'center_y': .5}
    do_default_tab: False

    TabbedPanelItem:
        text: 'Status'
        StatusTab:
            id: status_tab

    TabbedPanelItem:
        text: 'tab2'
        BoxLayout:
            Label:
                text: 'Second tab content area'
            Button:
                text: 'Button that does nothing'
    TabbedPanelItem:
        text: 'Files'
        FilesTab:
            id: files_tab
